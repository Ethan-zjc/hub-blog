(window.webpackJsonp=window.webpackJsonp||[]).push([[104],{437:function(s,a,e){"use strict";e.r(a);var n=e(4),t=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"åˆè¯†ast"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#åˆè¯†ast"}},[s._v("#")]),s._v(" åˆè¯†AST")]),s._v(" "),a("p",{attrs:{align:"center"}},[a("img",{attrs:{src:"https://raw.githubusercontent.com/Ethan-zjc/picx-images-hosting/master/image2023-11-30_16-11-42.6sljy811qv40.webp",width:"500"}})]),s._v(" "),a("p",[s._v("æŒæ¡äº†ASTï¼Œç›¸å½“äºæŒæ¡äº†æ§åˆ¶ä»£ç çš„ä»£ç èƒ½åŠ›")]),s._v(" "),a("h2",{attrs:{id:"ä»€ä¹ˆæ˜¯ast"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä»€ä¹ˆæ˜¯ast"}},[s._v("#")]),s._v(" ä»€ä¹ˆæ˜¯ast")]),s._v(" "),a("p",[s._v("It is a hierarchical program representation that presents source code structure according to the grammar of a programming language, each AST node corresponds to an item of a source code.\nå®ƒæ˜¯ä¸€ç§åˆ†å±‚çš„ç¨‹åºè¡¨ç¤ºï¼Œæ ¹æ®ç¼–ç¨‹è¯­è¨€çš„è¯­æ³•è¡¨ç¤ºæºä»£ç ç»“æ„ï¼Œæ¯ä¸ªASTèŠ‚ç‚¹å¯¹åº”äºæºä»£ç çš„ä¸€é¡¹ã€‚")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/Ethan-zjc/picx-images-hosting/master/image2023-11-30_16-5-13.n22as0ah2g.webp",alt:""}})]),s._v(" "),a("h2",{attrs:{id:"astçš„æŠ½è±¡ç»“æ„æ ‡å‡†"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#astçš„æŠ½è±¡ç»“æ„æ ‡å‡†"}},[s._v("#")]),s._v(" astçš„æŠ½è±¡ç»“æ„æ ‡å‡†ï¼Ÿ")]),s._v(" "),a("p",[s._v("JavaScript AST çš„ç»“æ„ éµå¾ªçš„æ˜¯ESTree æ ‡å‡†ï¼Œ æ— è®ºbabelã€æˆ–è€…Esprimaã€Acorn https://github.com/estree/estreeï¼Œ estreeæ˜¯ç”±å¤šä¸ª JavaScript è§£æå™¨å’Œç¼–è¯‘å™¨å¼€å‘è€…ã€å·¥å…·å’Œåº“çš„è´¡çŒ®è€…ä»¬å…±åŒåˆ¶å®šå’Œç»´æŠ¤")]),s._v(" "),a("p",[s._v("HTML çš„è§£æé€šå¸¸ä¼šç”Ÿæˆ DOMï¼ˆæ–‡æ¡£å¯¹è±¡æ¨¡å‹ï¼‰ï¼Œå®ƒæ˜¯ç”±æµè§ˆå™¨ä¸­çš„ HTML è§£æå™¨åˆ›å»ºçš„ä¸€ç§æ ‘å½¢ç»“æ„ï¼Œè¡¨ç¤º HTML æ–‡æ¡£çš„å±‚æ¬¡ç»“æ„ï¼Œæš‚æ—¶æ²¡æœ‰ç±»ä¼¼estreeç»Ÿä¸€çš„æ ‡å‡†è§„èŒƒåˆ¶å®šï¼Œ ä¾‹å¦‚htmlparserè§£æå·¥å…·")]),s._v(" "),a("p",[s._v("CSS çš„è§£æé€šå¸¸ä¼šç”Ÿæˆæ ·å¼è¡¨å¯¹è±¡æ¨¡å‹ï¼ˆCSSOMï¼‰ï¼Œå®ƒç±»ä¼¼äº DOMï¼Œæ˜¯è¡¨ç¤º CSS æ ·å¼è¡¨çš„ä¸€ç§æ ‘å½¢ç»“æ„ã€‚CSSOM ç”±æµè§ˆå™¨ä¸­çš„ CSS è§£æå™¨åˆ›å»º ã€‚ ä¾‹å¦‚postcssè§£æå·¥å…·")]),s._v(" "),a("h2",{attrs:{id:"ä¸ºä»€ä¹ˆè¦äº†è§£ast"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä¸ºä»€ä¹ˆè¦äº†è§£ast"}},[s._v("#")]),s._v(" ä¸ºä»€ä¹ˆè¦äº†è§£ast")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/Ethan-zjc/picx-images-hosting/master/image2023-11-30_16-9-40.3gfu0a740dm0.webp",alt:""}}),s._v("\næŒæ¡äº†ASTï¼Œç›¸å½“äºæŒæ¡äº†æ§åˆ¶ä»£ç çš„ä»£ç èƒ½åŠ›ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬æ‹“å®½æ€è·¯å’Œè§†é‡ï¼Œä¸ç®¡æ˜¯å†™æ¡†æ¶ï¼Œè¿˜æ˜¯å†™å·¥å…·å’Œé€»è¾‘ï¼ŒASTéƒ½ä¼šæˆä¸ºæˆ‘ä»¬çš„å¾—åŠ›åŠ©æ‰‹")]),s._v(" "),a("h2",{attrs:{id:"ast-åœ¨ç¼–è¯‘ä¸­çš„ä½ç½®"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ast-åœ¨ç¼–è¯‘ä¸­çš„ä½ç½®"}},[s._v("#")]),s._v(" AST åœ¨ç¼–è¯‘ä¸­çš„ä½ç½®")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/Ethan-zjc/picx-images-hosting/master/image2023-11-30_16-11-42.6sljy811qv40.webp",alt:""}}),s._v("\nåœ¨ç¼–è¯‘åŸç†ä¸­ï¼Œç¼–è¯‘å™¨è½¬æ¢ä»£ç é€šå¸¸è¦ç»è¿‡ä¸‰ä¸ªæ­¥éª¤ï¼šè¯æ³•åˆ†æï¼ˆLexical Analysisï¼‰ã€è¯­æ³•åˆ†æï¼ˆSyntax Analysisï¼‰ã€ä»£ç ç”Ÿæˆï¼ˆCode Generationï¼‰ï¼Œå¦‚ä¸‹å›¾ï¼š")]),s._v(" "),a("h3",{attrs:{id:"è¯æ³•åˆ†æ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#è¯æ³•åˆ†æ"}},[s._v("#")]),s._v(" è¯æ³•åˆ†æ")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://resources.jointjs.com/demos/rappid/apps/Ast/index.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("è¯æ³•åˆ†æå·¥å…·"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://esprima.org/demo/parse.html#",target:"_blank",rel:"noopener noreferrer"}},[s._v("è¯æ³•åˆ†æå·¥å…·"),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("è¯æ³•åˆ†æé˜¶æ®µæ˜¯ç¼–è¯‘è¿‡ç¨‹çš„ç¬¬ä¸€ä¸ªé˜¶æ®µï¼Œè¿™ä¸ªé˜¶æ®µçš„ä»»åŠ¡æ˜¯ä»å·¦åˆ°å³ä¸€ä¸ªå­—ç¬¦ä¸€ä¸ªå­—ç¬¦åœ°è¯»å…¥æºç¨‹åºï¼Œç„¶åæ ¹æ®æ„è¯è§„åˆ™è¯†åˆ«å•è¯ï¼Œç”Ÿæˆ token ç¬¦å·æµï¼Œæ¯”å¦‚ isPanda('ğŸ¼')ï¼Œä¼šè¢«æ‹†åˆ†æˆ isPandaï¼Œ(ï¼Œ'ğŸ¼'ï¼Œ) å››éƒ¨åˆ†ï¼Œæ¯éƒ¨åˆ†éƒ½æœ‰ä¸åŒçš„å«ä¹‰ï¼Œå¯ä»¥å°†è¯æ³•åˆ†æè¿‡ç¨‹æƒ³è±¡ä¸ºä¸åŒç±»å‹æ ‡è®°çš„åˆ—è¡¨æˆ–æ•°ç»„ã€‚")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/Ethan-zjc/picx-images-hosting/master/2501174-20220427101354716-611471191.6pxjv3v3ab00.gif",alt:""}})]),s._v(" "),a("h3",{attrs:{id:"è¯­æ³•åˆ†æ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#è¯­æ³•åˆ†æ"}},[s._v("#")]),s._v(" è¯­æ³•åˆ†æ")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://astexplorer.net/",target:"_blank",rel:"noopener noreferrer"}},[s._v("è¯­æ³•åˆ†æå·¥å…·"),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("è¯­æ³•åˆ†ææ˜¯ç¼–è¯‘è¿‡ç¨‹çš„ä¸€ä¸ªé€»è¾‘é˜¶æ®µï¼Œè¯­æ³•åˆ†æçš„ä»»åŠ¡æ˜¯åœ¨è¯æ³•åˆ†æçš„åŸºç¡€ä¸Šå°†å•è¯åºåˆ—ç»„åˆæˆå„ç±»è¯­æ³•çŸ­è¯­ï¼Œæ¯”å¦‚â€œç¨‹åºâ€ï¼Œâ€œè¯­å¥â€ï¼Œâ€œè¡¨è¾¾å¼â€ç­‰ï¼Œå‰é¢çš„ä¾‹å­ä¸­ï¼ŒisPanda('ğŸ¼') å°±ä¼šè¢«åˆ†æä¸ºä¸€æ¡è¡¨è¾¾è¯­å¥ ExpressionStatementï¼ŒisPanda() å°±ä¼šè¢«åˆ†ææˆä¸€ä¸ªå‡½æ•°è¡¨è¾¾å¼ CallExpressionï¼Œå°±ä¼šè¢«åˆ†ææˆä¸€ä¸ªå˜é‡ Literal ç­‰ï¼Œä¼—å¤šè¯­æ³•ä¹‹é—´çš„ä¾èµ–ã€åµŒå¥—å…³ç³»ï¼Œå°±æ„æˆäº†ä¸€ä¸ªæ ‘çŠ¶ç»“æ„ï¼Œå³ AST è¯­æ³•æ ‘ã€‚")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/Ethan-zjc/picx-images-hosting/master/2501174-20220427101415313-1435211089.10wlanw3xt5s.gif",alt:""}})]),s._v(" "),a("h3",{attrs:{id:"ä»£ç ç”Ÿæˆ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä»£ç ç”Ÿæˆ"}},[s._v("#")]),s._v(" ä»£ç ç”Ÿæˆ")]),s._v(" "),a("p",[s._v("ä»£ç ç”Ÿæˆæ˜¯æœ€åä¸€æ­¥ï¼Œå°† AST è¯­æ³•æ ‘è½¬æ¢æˆå¯æ‰§è¡Œä»£ç å³å¯ï¼Œåœ¨è½¬æ¢ä¹‹å‰ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥æ“ä½œè¯­æ³•æ ‘ï¼Œè¿›è¡Œå¢åˆ æ”¹æŸ¥ç­‰æ“ä½œï¼Œä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ç¡®å®šå˜é‡çš„å£°æ˜ä½ç½®ã€æ›´æ”¹å˜é‡çš„å€¼ã€åˆ é™¤æŸäº›èŠ‚ç‚¹ç­‰ï¼Œæˆ‘ä»¬å°†è¯­å¥ isPanda('ğŸ¼') ä¿®æ”¹ä¸ºä¸€ä¸ªå¸ƒå°”ç±»å‹çš„ Literalï¼štrueï¼Œè¯­æ³•æ ‘å°±æœ‰å¦‚ä¸‹å˜åŒ–ï¼š\n"),a("img",{attrs:{src:"https://raw.githubusercontent.com/Ethan-zjc/picx-images-hosting/master/2501174-20220427101416281-1772382765.72g0vvptagw0.gif",alt:""}})]),s._v(" "),a("h2",{attrs:{id:"babel-ç›¸å…³"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#babel-ç›¸å…³"}},[s._v("#")]),s._v(" Babel ç›¸å…³")]),s._v(" "),a("p",[s._v("Babel åŒ…å«çš„å„ç§åŠŸèƒ½åŒ…ã€APIã€å„æ–¹æ³•å¯é€‰å‚æ•°ç­‰ï¼Œåœ¨å®é™…ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥å®‰è£…å¦‚ä¸‹ npm install @babel/core @babel/parser @babel/traverse @babel/generator")]),s._v(" "),a("p",[s._v("åœ¨åšé€†å‘è§£æ··æ·†ä¸­ï¼Œä¸»è¦ç”¨åˆ°äº† Babel çš„ä»¥ä¸‹å‡ ä¸ªåŠŸèƒ½åŒ…ï¼š")]),s._v(" "),a("p",[s._v("@babel/coreï¼šBabel ç¼–è¯‘å™¨æœ¬èº«ï¼Œæä¾›äº† babel çš„ç¼–è¯‘ APIï¼›\n@babel/parserï¼šå°† JavaScript ä»£ç è§£ææˆ AST è¯­æ³•æ ‘ï¼›\n@babel/traverseï¼šéå†ã€ä¿®æ”¹ AST è¯­æ³•æ ‘çš„å„ä¸ªèŠ‚ç‚¹ï¼›\n@babel/generatorï¼šå°† AST è¿˜åŸæˆ JavaScript ä»£ç ï¼›\n@babel/typesï¼šåˆ¤æ–­ã€éªŒè¯èŠ‚ç‚¹çš„ç±»å‹ã€æ„å»ºæ–° AST èŠ‚ç‚¹ç­‰ã€‚")]),s._v(" "),a("p",[s._v("@babel/core\nBabel ç¼–è¯‘å™¨æœ¬èº«ï¼Œè¢«æ‹†åˆ†æˆäº†ä¸‰ä¸ªæ¨¡å—ï¼š@babel/parserã€@babel/traverseã€@babel/generatorï¼Œæ¯”å¦‚ä»¥ä¸‹æ–¹æ³•çš„å¯¼å…¥æ•ˆæœéƒ½æ˜¯ä¸€æ ·çš„ï¼š")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('const parse = require("@babel/parser").parse;\nconst parse = require("@babel/core").parse;\n\nconst traverse = require("@babel/traverse").default\nconst traverse = require("@babel/core").traverse\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("@babel/parser"),a("br"),s._v("\n@babel/parser å¯ä»¥å°† JavaScript ä»£ç è§£ææˆ AST è¯­æ³•æ ‘ï¼Œå…¶ä¸­ä¸»è¦æä¾›äº†ä¸¤ä¸ªæ–¹æ³•ï¼š")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("parser.parse(code, [{options}])ï¼šè§£æä¸€æ®µ JavaScript ä»£ç ï¼›<br>\nparser.parseExpression(code, [{options}])ï¼šè€ƒè™‘åˆ°äº†æ€§èƒ½é—®é¢˜ï¼Œè§£æå•ä¸ª JavaScript è¡¨è¾¾å¼ã€‚\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("ä»¥ä¸‹çœ‹ä¸ªå…·ä½“çš„ä¾‹å­ã€æºç ï¼š")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("/**\n * ä¸“é¢˜&ç« èŠ‚å°é¢å›¾,å ä½å›¾placeholder,æ ¹æ®å±å¹•å®½åº¦è‡ªé€‚åº”æ‹¼æ¥å‰ç«¯åˆ«ååç¼€\n */\nimport { util_feSuffix } from '../../util.js';\nconst computedBehavior = require('miniprogram-computed');\n\nComponent({\n    behaviors: [computedBehavior],\n    properties: {\n        src: {\n            type: String,\n            value: '',\n        },\n        width: {\n            type: Number,\n            value: 0,\n        },\n        height: {\n            type: Number,\n            value: 0,\n        },\n        isBg: {\n            type: Boolean,\n            value: false,\n        },\n        mode: {\n            type: String,\n            value: 'aspectFill',\n        },\n        quality: {\n            type: Boolean,\n            value: false,\n        },\n        isSuffix: {\n            type: Boolean,\n            value: true,\n        },\n        index: {\n            type: [String, Number],\n            value: 0,\n        },\n    },\n    data: {\n        loaded: false,\n        test11: [1, 2, 3],\n    },\n    computed: {\n        style(data) {\n            const { width, height } = data;\n            if (width > height) {\n                // å®½å›¾\n                return `width: ${height}rpx; height: ${height / 2}rpx;`;\n            } else {\n                //  é•¿å›¾\n                return `width: ${width / 2}rpx; height: ${width / 4}rpx;`;\n            }\n        },\n    },\n    watch: {\n        src: function () {\n            setTimeout(() => {\n                this.init();\n            }, 200);\n        },\n    },\n    methods: {\n        init() {\n            const { src, width, quality, isSuffix } = this.data;\n            if (!src) {\n                console.log('æ£€æŸ¥æ˜¯å¦ä¼ é€’äº†src');\n                return;\n            }\n            this.setData({\n                computedSrc: isSuffix ? util_feSuffix({ src, width, quality }) : src,\n            });\n        },\n\n        loaded() {\n            this.setData({ loaded: true });\n            this.setEvent();\n        },\n        setEvent() {\n            let event = 'onImageLoad';\n            let index = this.data.index;\n            this.triggerEvent(event, { index });\n        },\n    },\n});\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br"),a("span",{staticClass:"line-number"},[s._v("74")]),a("br"),a("span",{staticClass:"line-number"},[s._v("75")]),a("br"),a("span",{staticClass:"line-number"},[s._v("76")]),a("br"),a("span",{staticClass:"line-number"},[s._v("77")]),a("br"),a("span",{staticClass:"line-number"},[s._v("78")]),a("br"),a("span",{staticClass:"line-number"},[s._v("79")]),a("br"),a("span",{staticClass:"line-number"},[s._v("80")]),a("br"),a("span",{staticClass:"line-number"},[s._v("81")]),a("br"),a("span",{staticClass:"line-number"},[s._v("82")]),a("br"),a("span",{staticClass:"line-number"},[s._v("83")]),a("br"),a("span",{staticClass:"line-number"},[s._v("84")]),a("br"),a("span",{staticClass:"line-number"},[s._v("85")]),a("br"),a("span",{staticClass:"line-number"},[s._v("86")]),a("br"),a("span",{staticClass:"line-number"},[s._v("87")]),a("br"),a("span",{staticClass:"line-number"},[s._v("88")]),a("br")])]),a("p",[s._v("è½¬æ¢åçš„astç»“æ„\n"),a("img",{attrs:{src:"https://raw.githubusercontent.com/Ethan-zjc/picx-images-hosting/master/image2023-11-30_16-31-25.5ebzdlk8qbk0.webp",alt:""}})]),s._v(" "),a("p",[s._v("ä¾‹å¦‚æˆ‘ä»¬åœ¨å°†å¾®ä¿¡çš„ä»£ç è½¬åŒ–ä¸ºç™¾åº¦å°ç¨‹åºæ˜¯ï¼Œå› ä¸ºç™¾åº¦ä¸æ”¯æŒminiprogram-computedä¾èµ–å¼•å…¥ä»¥åŠbehaviorsæ³¨å…¥ï¼Œç¬¬ä¸€è¡Œä¸ºVariableDeclarationèŠ‚ç‚¹ç±»å‹")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("traverse(result, {\n    // åˆ é™¤jsä¸­computedBehaviorå¼•ç”¨\n    VariableDeclaration(path) {\n        path.node.declarations.forEach((item) => {\n            if (item.id.name == 'computedBehavior') {\n                path.remove();\n            }\n        })\n    },\n\tObjectProperty(path) {\n        if (path.node.key.name === 'behaviors' && path.node.value.type === 'ArrayExpression') {\n            const elements = path.node.value.elements;\n            const index = elements.findIndex((item) => item.name == 'computedBehavior');\n            if (index > -1) {\n                elements.splice(index, 1);\n            }\n        }\n    }\n})\n\n\næˆ–è€…\ntraverse(result, {\n    // åˆ é™¤jsä¸­computedBehaviorå¼•ç”¨\n    VariableDeclaration: {\n        enter(path) {\n            path.node.declarations.forEach((item) => {\n                if (item.id.name == 'computedBehavior') {\n                    path.remove();\n                }\n            })\n        },\n    },\n    ObjectProperty: {\n        enter(path) {\n            if (\n                path.node.key.name === 'behaviors' &&\n                path.node.value.type === 'ArrayExpression'\n            ) {\n                const elements = path.node.value.elements;\n                const index = elements.findIndex((item) => item.name == 'computedBehavior');\n                if (index > -1) {\n                    elements.splice(index, 1);\n                }\n            }\n        },\n    },\n});\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br")])]),a("p",[s._v("ä»¥ä¸Šå‡ ç§å†™æ³•ä¸­æœ‰ç”¨åˆ°äº† enter æ–¹æ³•ï¼Œåœ¨èŠ‚ç‚¹çš„éå†è¿‡ç¨‹ä¸­ï¼Œè¿›å…¥èŠ‚ç‚¹ï¼ˆenterï¼‰ä¸é€€å‡ºï¼ˆexitï¼‰èŠ‚ç‚¹éƒ½ä¼šè®¿é—®ä¸€æ¬¡èŠ‚ç‚¹ï¼Œtraverse é»˜è®¤åœ¨è¿›å…¥èŠ‚ç‚¹æ—¶è¿›è¡ŒèŠ‚ç‚¹çš„å¤„ç†ï¼Œå¦‚æœè¦åœ¨é€€å‡ºèŠ‚ç‚¹æ—¶å¤„ç†ï¼Œé‚£ä¹ˆåœ¨ visitor ä¸­å°±å¿…é¡»å£°æ˜ exit æ–¹æ³•"),a("br"),s._v("\nä»¥ä¸Šä¿®æ”¹astä¹‹åï¼Œå½“æˆ‘ä»¬æ‰§è¡Œgenerateä¹‹åå³å¾—åˆ°æˆ‘ä»¬ä¿®æ”¹ä¹‹åçš„ä»£ç ï¼Œä½¿ç”¨"),a("a",{attrs:{href:"https://astexplorer.net/",target:"_blank",rel:"noopener noreferrer"}},[s._v("astexplorer"),a("OutboundLink")],1),s._v("æŸ¥çœ‹")]),s._v(" "),a("h2",{attrs:{id:"babel-traverseèŠ‚ç‚¹ç±»å‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#babel-traverseèŠ‚ç‚¹ç±»å‹"}},[s._v("#")]),s._v(" babel/traverseèŠ‚ç‚¹ç±»å‹")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[s._v("Identifierï¼šæ ‡è¯†ç¬¦  \nLiteralï¼šå­—é¢é‡ï¼ˆæ•°å­—ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å€¼ç­‰ï¼‰  \nBinaryExpressionï¼šäºŒå…ƒè¡¨è¾¾å¼ï¼ˆå¦‚åŠ æ³•ã€å‡æ³•ï¼‰  \nUnaryExpressionï¼šä¸€å…ƒè¡¨è¾¾å¼ï¼ˆå¦‚å–åã€é€’å¢ã€é€’å‡ï¼‰  \nLogicalExpressionï¼šé€»è¾‘è¡¨è¾¾å¼ï¼ˆå¦‚é€»è¾‘ä¸ã€é€»è¾‘æˆ–ï¼‰  \nAssignmentExpressionï¼šèµ‹å€¼è¡¨è¾¾å¼  \nConditionalExpressionï¼šæ¡ä»¶è¡¨è¾¾å¼  \nCallExpressionï¼šå‡½æ•°è°ƒç”¨è¡¨è¾¾å¼  \nFunctionDeclarationï¼šå‡½æ•°å£°æ˜  \nArrowFunctionExpressionï¼šç®­å¤´å‡½æ•°è¡¨è¾¾å¼  \nObjectExpressionï¼šå¯¹è±¡è¡¨è¾¾å¼  \nArrayExpressionï¼šæ•°ç»„è¡¨è¾¾å¼  \nMemberExpressionï¼šæˆå‘˜è¡¨è¾¾å¼  \nIfStatementï¼šif è¯­å¥  \nSwitchStatementï¼šswitch è¯­å¥  \nForStatementï¼šfor å¾ªç¯è¯­å¥  \nWhileStatementï¼šwhile å¾ªç¯è¯­å¥  \nDoWhileStatementï¼šdo-while å¾ªç¯è¯­å¥  \nBreakStatementï¼šbreak è¯­å¥  \nContinueStatementï¼šcontinue è¯­å¥  \nReturnStatementï¼šreturn è¯­å¥  \nThrowStatementï¼šthrow è¯­å¥  \nTryStatementï¼štry-catch è¯­å¥  \nBlockStatementï¼šä»£ç å—  \nExpressionStatementï¼šè¡¨è¾¾å¼è¯­å¥  \n")])])]),a("h2",{attrs:{id:"traverseèŠ‚ç‚¹éå†æ–¹æ³•"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#traverseèŠ‚ç‚¹éå†æ–¹æ³•"}},[s._v("#")]),s._v(" traverseèŠ‚ç‚¹éå†æ–¹æ³•")]),s._v(" "),a("h3",{attrs:{id:"åŸºç¡€èŠ‚ç‚¹éå†æ–¹æ³•"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#åŸºç¡€èŠ‚ç‚¹éå†æ–¹æ³•"}},[s._v("#")]),s._v(" åŸºç¡€èŠ‚ç‚¹éå†æ–¹æ³•")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[s._v("Identifier ç”¨äºè®¿é—®æ ‡è¯†ç¬¦èŠ‚ç‚¹  \nVariableDeclaration ç”¨äºè®¿é—®å˜é‡å£°æ˜èŠ‚ç‚¹  \nFunctionDeclaration ç”¨äºè®¿é—®å‡½æ•°å£°æ˜èŠ‚ç‚¹  \n")])])]),a("h3",{attrs:{id:"è¡¨è¾¾å¼èŠ‚ç‚¹éå†æ–¹æ³•"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#è¡¨è¾¾å¼èŠ‚ç‚¹éå†æ–¹æ³•"}},[s._v("#")]),s._v(" è¡¨è¾¾å¼èŠ‚ç‚¹éå†æ–¹æ³•")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[s._v("CallExpression ç”¨äºè®¿é—®è°ƒç”¨è¡¨è¾¾å¼èŠ‚ç‚¹  \nMemberExpression ç”¨äºè®¿é—®æˆå‘˜è¡¨è¾¾å¼èŠ‚ç‚¹  \nBinaryExpression ç”¨äºè®¿é—®äºŒå…ƒè¡¨è¾¾å¼èŠ‚ç‚¹  \nUnaryExpression ç”¨äºè®¿é—®ä¸€å…ƒè¡¨è¾¾å¼èŠ‚ç‚¹  \nObjectExpression ç”¨äºè®¿é—®å¯¹è±¡è¡¨è¾¾å¼èŠ‚ç‚¹  \nArrayExpression ç”¨äºè®¿é—®æ•°ç»„è¡¨è¾¾å¼èŠ‚ç‚¹  \nConditionalExpression ç”¨äºè®¿é—®æ¡ä»¶è¡¨è¾¾å¼èŠ‚ç‚¹  \n")])])]),a("h2",{attrs:{id:"pathèŠ‚ç‚¹æ“ä½œæ–¹æ³•"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pathèŠ‚ç‚¹æ“ä½œæ–¹æ³•"}},[s._v("#")]),s._v(" pathèŠ‚ç‚¹æ“ä½œæ–¹æ³•")]),s._v(" "),a("h3",{attrs:{id:"æ·»åŠ èŠ‚ç‚¹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ·»åŠ èŠ‚ç‚¹"}},[s._v("#")]),s._v(" æ·»åŠ èŠ‚ç‚¹")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[s._v("path.pushContainer() ç”¨äºåœ¨å®¹å™¨èŠ‚ç‚¹ä¸­æ·»åŠ å­èŠ‚ç‚¹  \npath.insertBefore() ç”¨äºåœ¨å½“å‰èŠ‚ç‚¹ä¹‹å‰æ’å…¥æ–°èŠ‚ç‚¹  \npath.insertAfter() ç”¨äºåœ¨å½“å‰èŠ‚ç‚¹ä¹‹åæ’å…¥æ–°èŠ‚ç‚¹  \n")])])]),a("h3",{attrs:{id:"ç§»é™¤èŠ‚ç‚¹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç§»é™¤èŠ‚ç‚¹"}},[s._v("#")]),s._v(" ç§»é™¤èŠ‚ç‚¹")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[s._v("path.remove() ç”¨äºç§»é™¤å½“å‰èŠ‚ç‚¹  \npath.replaceWith() ç”¨äºæ›¿æ¢å½“å‰èŠ‚ç‚¹  \n")])])]),a("h3",{attrs:{id:"è·å–èŠ‚ç‚¹ä¿¡æ¯"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#è·å–èŠ‚ç‚¹ä¿¡æ¯"}},[s._v("#")]),s._v(" è·å–èŠ‚ç‚¹ä¿¡æ¯")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[s._v("path.node ç”¨äºè®¿é—®å½“å‰èŠ‚ç‚¹çš„ AST ä¿¡æ¯  \npath.parent ç”¨äºè®¿é—®å½“å‰èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹  \npath.get() ç”¨äºè·å–æŒ‡å®šè·¯å¾„ä¸‹çš„èŠ‚ç‚¹  \n")])])]),a("h3",{attrs:{id:"å…¶ä»–"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å…¶ä»–"}},[s._v("#")]),s._v(" å…¶ä»–")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[s._v("path.skip æ–¹æ³•ç”¨äºè·³è¿‡å½“å‰èŠ‚ç‚¹çš„åä»£èŠ‚ç‚¹  \npath.skipKey æ–¹æ³•ç”¨äºè·³è¿‡ç‰¹å®šçš„èŠ‚ç‚¹é”®çš„éå†  \npath.traverse æ˜¯ NodePath å¯¹è±¡çš„æ–¹æ³•ï¼Œå¯ä»¥åœ¨ç‰¹å®šèŠ‚ç‚¹ä¸Šè¿›è¡Œéå†  \n")])])]),a("h2",{attrs:{id:"astå·¥å…·å’Œv8ç¼–è¯‘"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#astå·¥å…·å’Œv8ç¼–è¯‘"}},[s._v("#")]),s._v(" ASTå·¥å…·å’ŒV8ç¼–è¯‘")]),s._v(" "),a("p",[s._v("å¯¹æ¯” AST æ ‡å‡†å·¥å…·ä¸ V8 å¼•æ“çš„ç¼–è¯‘è¿‡ç¨‹")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/Ethan-zjc/picx-images-hosting/master/image2023-11-30_17-19-56.23w3ibwi77r4.webp",alt:""}})]),s._v(" "),a("p",[s._v("AST æ ‡å‡†å·¥å…·ä¸ V8 å¼•æ“å¤„ç†ä»£ç çš„è¿‡ç¨‹æœ‰ä¸€å®šçš„é‡åˆï¼Œä¸åŒçš„æ˜¯ï¼ŒV8 å°† AST è½¬æ¢ä¸ºå­—èŠ‚ç åè¿›å…¥æ‰§è¡Œä»£ç çš„é˜¶æ®µï¼Œè€Œ AST æ ‡å‡†å·¥å…·åªæ˜¯å°†æ—§ä»£ç è½¬æ¢ä¸ºæ–°ä»£ç ")])])}),[],!1,null,null,null);a.default=t.exports}}]);